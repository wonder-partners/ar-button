class t extends Error{constructor(t){super(t),this.name="Requirement Error"}}const e="deferred",i={Android:()=>navigator.userAgent.match(/Android/i),BlackBerry:()=>navigator.userAgent.match(/BlackBerry/i),iOS:()=>navigator.userAgent.match(/iPhone|iPad|iPod/i),Opera:()=>navigator.userAgent.match(/Opera Mini/i),Windows:()=>navigator.userAgent.match(/IEMobile/i)||navigator.userAgent.match(/WPDesktop/i),any:()=>i.Android()||i.BlackBerry()||i.iOS()||i.Opera()||i.Windows()};function n(e,i=""){if(!e)throw new t(i);return!0}function o(t,e){const i=t.getAttribute(e);if(!i)return null;return encodeURIComponent(i)}function r(t,e=""){const n=document.createElement("a");if(n.setAttribute("id","ar-anchor"),i.iOS()){if(!n.relList.supports("ar"))return void console.error("AR is not available.");n.appendChild(document.createElement("img")),n.setAttribute("rel","ar"),n.addEventListener("message",(t=>{"_apple_ar_quicklook_button_tapped"===t.data&&(window.location.href=e)}),!1)}n.setAttribute("href",t),document.body.appendChild(n),n.click()}function c(t){t.setAttribute("ar","quick-look");const e=t.getAttribute("ios-src"),i=t.getAttribute("ios-link")??"",n=t.getAttribute("allows-content-scaling"),c=o(t,"checkout-title"),l=o(t,"checkout-subtitle"),a=o(t,"price"),s=o(t,"call-to-action"),u=o(t,"canonical-web-page-url");let b=`${e}#`;c&&(b+=`&checkoutTitle=${c}`),l&&(b+=`&checkoutSubtitle=${l}`),a&&(b+=`&price=${a}`),s&&(b+=`&callToAction=${s}`),u&&(b+=`&canonicalWebPageURL=${u}`),"0"===n&&(b+="&allowsContentScaling=0"),t.addEventListener("click",(()=>r(b,i)))}function l(t){t.setAttribute("ar","scene-viewer");const e=t.getAttribute("src"),i=t.getAttribute("link"),n=o(t,"title"),c=o(t,"fallback-url")??"https://developers.google.com/ar",l=t.hasAttribute("occlusion");let a=`intent://arvr.google.com/scene-viewer/1.0?file=${e}&mode=ar_only`;n&&(a+=`&title=${n}`),i&&(a+=`&link=${i}`),l||(a+="&disable_occlusion=true"),a+="#Intent;scheme=https;package=com.google.ar.core;action=android.intent.action.VIEW;",a+=`S.browser_fallback_url=${c};`,a+="end;",t.addEventListener("click",(()=>r(a)))}function a({element:t,androidConf:o,iosConf:r}){n(t,"element cannot be null"),t.removeAttribute(e),i.Android()&&o&&(n(o.src,"src cannot be null, undefined or empty."),t.setAttribute("src",o.src),o.title&&t.setAttribute("title",o.title),o.link&&t.setAttribute("link",o.link),o.fallbackURL&&t.setAttribute("fallback-url",o.fallbackURL),o.occlusion&&!0===o.occlusion&&t.setAttribute("occlusion",""),l(t)),i.iOS()&&r&&(n(r.src,"src cannot be null, undefined or empty."),r.checkoutSubtitle??="ã…¤",r.price??="",t.setAttribute("ios-src",r.src),t.setAttribute("checkout-subtitle",r.checkoutSubtitle),t.setAttribute("price",r.price),r.checkoutTitle&&t.setAttribute("checkout-title",r.checkoutTitle),r.link&&t.setAttribute("ios-link",r.link),r.callToAction&&t.setAttribute("call-to-action",r.callToAction),r.canonicalWebPageURL&&t.setAttribute("canonical-web-page-url",r.canonicalWebPageURL),r.allowsContentScaling&&t.setAttribute("allows-content-scaling",r.allowsContentScaling?"1":"0"),c(t))}!function(){if(!i.any())return void console.error("This platform does not support AR.");document.querySelectorAll("ar-button").forEach((t=>{t.hasAttribute(e)||(i.iOS()?c(t):l(t))}))}();export{a as init};